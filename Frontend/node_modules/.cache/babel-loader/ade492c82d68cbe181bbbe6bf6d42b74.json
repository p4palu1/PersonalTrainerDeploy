{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/reems/Documents/My Web Sites/hotelmanagment/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/reems/Documents/My Web Sites/hotelmanagment/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";export var login=function login(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:'ADMIN_LOGIN_REQUEST'});config={headers:{'Content-Type':'application/json'}};_context.next=5;return axios.post('/api/admins/login',{email:email,password:password},config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch({type:'ADMIN_LOGIN_SUCCESS',payload:data});localStorage.setItem('adminInfo',JSON.stringify(data));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);dispatch({type:'ADMIN_LOGIN_FAIL',payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getAdminDetails=function getAdminDetails(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState,adminInfo,config,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:'ADMIN_DETAILS_REQUEST'});_getState=getState(),adminInfo=_getState.adminLogin.adminInfo;config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(adminInfo.token)}};_context2.next=6;return axios.get(\"/api/admins/\".concat(id),config);case 6:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;dispatch({type:'ADMIN_DETAILS_SUCCESS',payload:data});_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);dispatch({type:'ADMIN_DETAILS_FAIL',payload:_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();};export var logout=function logout(){return function(dispatch){localStorage.removeItem('adminInfo');dispatch({type:'ADMIN_LOGOUT'});dispatch({type:'ADMIN_DETAILS_RESET'});};};export var updateAdminProfile=function updateAdminProfile(admin){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState2,adminInfo,config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:'ADMIN_UPDATE_REQUEST'});_getState2=getState(),adminInfo=_getState2.adminLogin.adminInfo;config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(adminInfo.token)}};_context3.next=6;return axios.put(\"/api/admins/profile\",admin,config);case 6:_yield$axios$put=_context3.sent;data=_yield$axios$put.data;dispatch({type:'ADMIN_UPDATE_SUCCESS',payload:data});dispatch({type:'ADMIN_LOGIN_SUCCESS',payload:data});localStorage.setItem('adminInfo',JSON.stringify(data));_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);dispatch({type:'ADMIN_DETAILS_FAIL',payload:_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message});case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,13]]);}));return function(_x4,_x5){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/reems/Documents/My Web Sites/hotelmanagment/Frontend/src/actions/adminActions.js"],"names":["axios","login","email","password","dispatch","type","config","headers","post","data","payload","localStorage","setItem","JSON","stringify","response","message","getAdminDetails","id","getState","adminInfo","adminLogin","Authorization","token","get","logout","removeItem","updateAdminProfile","admin","put"],"mappings":"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","sourcesContent":["import axios from \"axios\"\r\n\r\nexport const login = (email, password) => async(dispatch) => {\r\n    try{\r\n        dispatch({\r\n            type: 'ADMIN_LOGIN_REQUEST'\r\n        })\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const { data } = await axios.post(\r\n            '/api/admins/login', \r\n            { email, password},\r\n            config\r\n            )\r\n\r\n        dispatch({\r\n            type: 'ADMIN_LOGIN_SUCCESS',\r\n            payload: data\r\n        })\r\n\r\n        localStorage.setItem('adminInfo', JSON.stringify(data) )\r\n    } catch(error) {\r\n         dispatch({\r\n            type: 'ADMIN_LOGIN_FAIL', \r\n            payload: error.response && error.response.data.message \r\n            ? error.response.data.message \r\n            : error.message,\r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const getAdminDetails = (id) => async(dispatch, getState) => {\r\n    try{\r\n        dispatch({\r\n            type: 'ADMIN_DETAILS_REQUEST'\r\n        })\r\n\r\n        const { adminLogin: { adminInfo } } = getState()\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${adminInfo.token}`\r\n            }\r\n        }\r\n\r\n        const { data } = await axios.get(\r\n            `/api/admins/${id}`, \r\n            config\r\n            )\r\n\r\n        dispatch({\r\n            type: 'ADMIN_DETAILS_SUCCESS',\r\n            payload: data\r\n        })\r\n        \r\n        } catch(error) {\r\n         dispatch({\r\n            type: 'ADMIN_DETAILS_FAIL', \r\n            payload: error.response && error.response.data.message \r\n            ? error.response.data.message \r\n            : error.message,\r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const logout = () => (dispatch) => {\r\n    localStorage.removeItem('adminInfo')\r\n    dispatch({ type: 'ADMIN_LOGOUT' })\r\n    dispatch({ type: 'ADMIN_DETAILS_RESET'})\r\n}\r\n\r\n\r\nexport const updateAdminProfile = (admin) => async(dispatch, getState) => {\r\n    try{\r\n        dispatch({\r\n            type: 'ADMIN_UPDATE_REQUEST'\r\n        })\r\n\r\n\r\n        const { adminLogin: { adminInfo } } = getState()\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${adminInfo.token}`\r\n            }\r\n        }\r\n\r\n        const { data } = await axios.put(\r\n            `/api/admins/profile`,\r\n            admin, \r\n            config\r\n            )\r\n\r\n        dispatch({\r\n            type: 'ADMIN_UPDATE_SUCCESS',\r\n            payload: data\r\n        })\r\n        dispatch({\r\n            type: 'ADMIN_LOGIN_SUCCESS',\r\n            payload: data\r\n        })\r\n\r\n        localStorage.setItem('adminInfo', JSON.stringify(data))\r\n        \r\n        } catch(error) {\r\n         dispatch({\r\n            type: 'ADMIN_DETAILS_FAIL', \r\n            payload: error.response && error.response.data.message \r\n            ? error.response.data.message \r\n            : error.message,\r\n        })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}